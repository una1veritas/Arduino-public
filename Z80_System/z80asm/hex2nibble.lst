                        ; --------------------------------------
                        ; zasm: assemble "hex2nibble.asm"
                        ; date: 2025-09-12 17:25:37
                        ; --------------------------------------


0040:                       org     0040h
                        
                        ;convert one adecimal char in a to nibble in c 
                        ;
0040:                   hex2nibble:
0040: 0EFF     [ 7]         ld      c, 0xff ; the default value is error code.
                        
0042: FE61     [14]         cp      'a'     ; check whether a lower case
0044: 3802     [21|26]      jr      c, digit_or_upper  ; a digit or an upper case if carry set
0046: E6DF     [28]         and     $df     ; lower case to upper case
0048:                   digit_or_upper:
0048: FE3A     [ 7]         cp      '9' + 1 ; check whether a digit
004A: 3005     [14|19]      jr      nc, upper  ; possibly an upper case letter if carry not set
004C: D630     [21]         sub     a, '0'  ; digit to integer value
004E: F8       [26|32]      ret     s       ; it was not '0' - '9' 
004F: 1808     [38]         jr      output
0051:                   upper:
0051: FE47     [ 7]         cp      'F'+1   ; check the digit whether less than 'F'
0053: D0       [12|18]      ret     nc      ; error if it is larger than 'F'
0054: D641     [19]         sub     'A'  ; A - F to integer 0 - 5
0056: F8       [24|30]      ret     s       ; it was not 'A' - 'F'
0057: C60A     [31]         add     a, 10   ; A - F to 10 - 15 by +5
0059:                   output:
0059: 4F       [ 4]         ld      c, a
005A: C9       [14]         ret


; +++ segments +++

#CODE          = $0040 =    64,  size = $001B =    27

; +++ global symbols +++

_end           = $005B =    91          hex2nibble.asm:1 (unused)
_size          = $001B =    27          hex2nibble.asm:1 (unused)
digit_or_upper = $0048 =    72          hex2nibble.asm:11
hex2nibble     = $0040 =    64          hex2nibble.asm:5 (unused)
output         = $0059 =    89          hex2nibble.asm:23
upper          = $0051 =    81          hex2nibble.asm:17


total time: 0.0010 sec.
no errors
